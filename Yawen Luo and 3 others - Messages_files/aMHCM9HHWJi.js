/*!CK:3805388141!*//*1405359372,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["4qmsI"]); }

__d("DataCollector",["PerformanceStats","copyProperties","Env","ErrorUtils","JSLogger","LogHistory","URI","UserActionHistory","ModuleDependencies"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={};h(p,{_metadata:{},_logs:{},addMetadata:function(q){h(p._metadata,q);},addLog:function(q,r){p._logs[q]=r;},getMetadata:function(){return p._metadata;},_collectData:function(){return {logs:p._collectLogs(),metadata:p._collectMetadata()};},_collectMetadata:function(){p.addMetadata({URI:m.getRequestURI().toString(),UserAgent:navigator.userAgent,ScriptPaths:p.getPageHistory()});return p._metadata;},_collectLogs:function(){p.addLog('cavalryid',p.getCavalryID());p.addLog('pageletperformance',g.getPageletStats());var q={};if(k.getDumpJSON){q=k.getDumpJSON();}else if(k.getEntries)q={log:k.getEntries(),now:Date.now(),env_start:i.start};var r={Env:JSON.stringify(i),ClickHistory:n.getHistory(),errors:j.history,ScriptPaths:p.getPageHistory(),ModuleDependencies:o.getNotLoadedModules()};h(q,r);p.addLog('jslogger',q);if(l.getEntries().length>0)p.addLog('Log History',l.formatEntries(l.getEntries()));return p._logs;},getPageHistory:function(){return [a._script_path];},getCavalryID:function(){if(a.CavalryLogger){var q=a.CavalryLogger.getInstance();if(q)return q.lid;}return null;},reset:function(){p._logs={};p._metadata={};}});e.exports=p;},null);